---
import PlotFigure from "../components/PlotFigure.astro";
import Layout from "../layouts/Layout.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/penguins.json";
---

<body>
    <nav style="margin-bottom: 20px;">
        <a href="/">Accueil</a>
        <a href="/simplePlot">Simple</a> 
        <a href="/simplePenguin">Simple Penguin</a> 
        <a href="/penguinFilter">Penguin avec filtre</a> 
        <a href="/penguinMultiFilter">Penguin multi-filtres</a>
    </nav>
    
    <h1>Simple Penguin - Longueur vs Profondeur du bec</h1>
    <div id="plot"></div>

    <script type="module">
        // Import Plot depuis CDN
        import * as Plot from "https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/+esm";
        
        // Données des manchots (extrait du JSON fourni)
        const penguins = [
            {"species": "Adelie", "island": "Torgersen", "culmen_length_mm": 39.1, "culmen_depth_mm": 18.7, "flipper_length_mm": 181, "body_mass_g": 3750, "sex": "MALE"},
            {"species": "Adelie", "island": "Torgersen", "culmen_length_mm": 39.5, "culmen_depth_mm": 17.4, "flipper_length_mm": 186, "body_mass_g": 3800, "sex": "FEMALE"},
            {"species": "Adelie", "island": "Torgersen", "culmen_length_mm": 40.3, "culmen_depth_mm": 18, "flipper_length_mm": 195, "body_mass_g": 3250, "sex": "FEMALE"},
            {"species": "Adelie", "island": "Torgersen", "culmen_length_mm": 36.7, "culmen_depth_mm": 19.3, "flipper_length_mm": 193, "body_mass_g": 3450, "sex": "FEMALE"},
            {"species": "Adelie", "island": "Torgersen", "culmen_length_mm": 39.3, "culmen_depth_mm": 20.6, "flipper_length_mm": 190, "body_mass_g": 3650, "sex": "MALE"},
            {"species": "Chinstrap", "island": "Dream", "culmen_length_mm": 46.5, "culmen_depth_mm": 17.9, "flipper_length_mm": 192, "body_mass_g": 3500, "sex": "FEMALE"},
            {"species": "Chinstrap", "island": "Dream", "culmen_length_mm": 50, "culmen_depth_mm": 19.5, "flipper_length_mm": 196, "body_mass_g": 3900, "sex": "MALE"},
            {"species": "Chinstrap", "island": "Dream", "culmen_length_mm": 51.3, "culmen_depth_mm": 19.2, "flipper_length_mm": 193, "body_mass_g": 3650, "sex": "MALE"},
            {"species": "Gentoo", "island": "Biscoe", "culmen_length_mm": 46.1, "culmen_depth_mm": 13.2, "flipper_length_mm": 211, "body_mass_g": 4500, "sex": "FEMALE"},
            {"species": "Gentoo", "island": "Biscoe", "culmen_length_mm": 50, "culmen_depth_mm": 16.3, "flipper_length_mm": 230, "body_mass_g": 5700, "sex": "MALE"},
            {"species": "Gentoo", "island": "Biscoe", "culmen_length_mm": 48.7, "culmen_depth_mm": 14.1, "flipper_length_mm": 210, "body_mass_g": 4450, "sex": "FEMALE"}
        ];
        
        // Filtrer les données pour exclure les valeurs nulles
        const validPenguins = penguins.filter(d => 
            d.culmen_length_mm != null && d.culmen_depth_mm != null
        );
        
        // Création du graphique
        const plot = Plot.plot({
            marks: [
                Plot.dot(validPenguins, {
                    x: "culmen_length_mm",
                    y: "culmen_depth_mm",
                    stroke: "species",
                    strokeWidth: 2,
                    r: 4
                })
            ],
            x: {
                label: "Longueur du bec (mm)",
                nice: true
            },
            y: {
                label: "Profondeur du bec (mm)",
                nice: true
            },
            color: {
                legend: true
            }
        });
        
        // Ajout du graphique à la page
        document.getElementById("plot").appendChild(plot);
    </script>
    
</body>